

<% if user_signed_in? %>
<!-- Vertical navbar -->

<div class="vertical-nav bg-white js-navmenu" id="sidebar">
  <div class="py-4 px-3 mb-4 bg-light">
    <div class="media d-flex align-items-center"><img src="https://spectator.imgix.net/content/uploads/2016/05/iStock_000076568217_Large.jpg?auto=compress,enhance,format&crop=faces,entropy,edges&fit=crop&w=620&h=413" alt="..." width="100" class="mr-3 rounded-circle img-thumbnail" id="avatar">
      <div class="media-body">
        <h4 class="m-0"><%= current_user.first_name %></h4>
        <p class="font-weight-light text-muted mb-0">placeholder text</p>
      </div>
      <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
            <%= link_to "Action", "#", class: "dropdown-item" %>
            <%= link_to "Another action", "#", class: "dropdown-item" %>
            <%= link_to "Log out", destroy_user_session_path, method: :delete, class: "dropdown-item" %>
          </div>
    </div>
  </div>

  <p class="text-gray font-weight-bold text-uppercase px-3 small pb-4 mb-0">Main</p>

  <ul class="nav flex-column bg-white mb-0">
    <li class="nav-item">
      <a href="#" class="nav-link text-dark font-italic bg-light">
                <i class="fa fa-th-large mr-3 text-primary fa-fw"></i>
                Home
            </a>
    </li>
    <li class="nav-item">
      <a href="#" class="nav-link text-dark font-italic">
                <i class="fas fa-tachometer-alt mr-3 text-primary fa-fw"></i>
                Dashboard
            </a>
    </li>
    <li class="nav-item">
      <a href="#" class="nav-link text-dark font-italic ">
                <i class="fas fa-calendar-alt mr-3 text-primary fa-fw" ></i>
                Schedule
            </a>
    </li>
    <li class="nav-item">
      <div class="dropdown show">
      <a href="#" class="nav-link text-dark font-italic dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="fa fa-address-card mr-3 text-primary fa-fw"></i>
                Profile Settings
            </a>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
    <a class="dropdown-item" href="#">Some Action Here</a>
    <%= link_to "Log out", destroy_user_session_path, method: :delete, class: "dropdown-item" %>
  </div>
          </div>
    </li>
  </ul>
  <p class="text-gray font-weight-bold text-uppercase px-3 small py-4 mb-0">My Folders</p>

  <ul class="nav flex-column bg-white mb-0">
    <li class="nav-item">
      <a href="<%= documents_path %>" class="nav-link text-dark font-italic">
                <i class="fa fa-area-chart mr-3 text-primary fa-fw"></i>
                See all my documents
            </a>
    </li>

    <!-- Creating a nav item per folder -->
    <% Folder.all.each do |folder| %>
    <div class="dropdown show">
    <li class="nav-item">
      <a href="" class="nav-link text-dark font-italic dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="fa fa-bar-chart mr-3 text-primary fa-fw"></i>
                <%= folder.name %>
            </a>


    <!-- Creating a dropdown view per document -->
    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
      <% Document.where(folder_id: folder).each do |document| %>
      <a class="dropdown-item" href="<%= document_path(document) %>"><%= document.name  %></a>
      <% end %>
    </div>

    <!-- End of the dropdown view per document -->

    </li>
    </div>
    <% end %>


    <!-- End of the nav item per folder -->
    <li class="nav-item">
      <a href="#" class="nav-link text-dark font-italic">
                <i class="fa fa-pie-chart mr-3 text-primary fa-fw"></i>
                Pie charts
            </a>
    </li>
  </ul>
  </div>
</div>
<!-- End vertical navbar -->
<% else %>
<div class="vertical-nav bg-white js-navmenu" id="sidebar">
  <div class="py-4 px-3 mb-4 bg-light">
    <div class="media d-flex align-items-center">
      <div class="media-body">
        <h4 class="m-0">Welcome to Curiosity</h4>
      </div>
    </div>
  </div>
  <ul class="nav flex-column bg-white mb-0">
    <li class="nav-item">
      <%= link_to "Login", new_user_session_path, class: "nav-link" %>
    </li>
    <li class="nav-item">
      <%= link_to "Sign Up",  new_user_registration_path, class: "nav-link" %>
    </li>
  </ul>
</div>

<% end %>






